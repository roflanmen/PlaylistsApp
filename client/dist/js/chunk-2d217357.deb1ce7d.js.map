{"version":3,"sources":["webpack:///./src/views/Profile.vue","webpack:///src/views/Profile.vue","webpack:///./src/views/Profile.vue?a2a8","webpack:///./src/views/Profile.vue?6f46"],"names":["render","_vm","this","_c","_self","staticClass","_v","ownProfile","attrs","_e","iAdmin","on","$event","preventDefault","stopPropagation","deleteUser","apply","arguments","creatingPlaylist","directives","name","rawName","value","expression","domProps","target","composing","isPublic","Array","isArray","_i","$$a","$$el","$$c","checked","$$v","$$i","concat","slice","submit","_s","role","username","_l","playlists","playlist","key","id","staticRenderFns","data","created","refreshUser","methods","url","params","$route","localStorage","getItem","headers","Authorization","fetch","then","user","json","message","alert","$router","push","is_admin","method","res","undefined","removeItem","$emit","body","is_public","JSON","stringify","emits","component"],"mappings":"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","file":"js/chunk-2d217357.deb1ce7d.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('main',[_c('h1',{staticClass:\"page-title\"},[_vm._v(\"Profile \"),(_vm.ownProfile)?_c('router-link',{attrs:{\"to\":\"/editprofile\"}},[_vm._v(\"Edit \")]):_vm._e(),(_vm.ownProfile || _vm.iAdmin)?_c('a',{attrs:{\"href\":\"\"},on:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.deleteUser.apply(null, arguments)}}},[_vm._v(\"Delete \")]):_vm._e(),(_vm.ownProfile)?_c('a',{on:{\"click\":function($event){_vm.creatingPlaylist = true}}},[_vm._v(\"Create playlist\")]):_vm._e()],1),_c('div',{staticClass:\"wrapper\",attrs:{\"id\":\"wrapper\"}},[(_vm.creatingPlaylist)?_c('div',[_c('form',{staticClass:\"edit-form\"},[_c('p',[_vm._v(\"Playlist creation\")]),_c('label',{attrs:{\"for\":\"name\"}},[_vm._v(\"Name:\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.name),expression:\"name\"}],staticClass:\"form-input\",attrs:{\"type\":\"name\"},domProps:{\"value\":(_vm.name)},on:{\"input\":function($event){if($event.target.composing)return;_vm.name=$event.target.value}}}),_c('br'),_c('label',{attrs:{\"for\":\"isPublic\"}},[_vm._v(\"Is public\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.isPublic),expression:\"isPublic\"}],staticClass:\"form-input\",attrs:{\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.isPublic)?_vm._i(_vm.isPublic,null)>-1:(_vm.isPublic)},on:{\"change\":function($event){var $$a=_vm.isPublic,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.isPublic=$$a.concat([$$v]))}else{$$i>-1&&(_vm.isPublic=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.isPublic=$$c}}}}),_c('br'),_c('button',{staticClass:\"form-button\",attrs:{\"type\":\"submit\"},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.submit()}}},[_vm._v(\"Create\")])])]):_vm._e(),_c('p',[_c('span',{staticClass:\"username\"},[_vm._v(_vm._s(_vm.role + \" \" + _vm.username))])]),_c('h2',{staticClass:\"block-name\"},[_vm._v(\"Playlists:\")]),_vm._l((_vm.playlists),function(playlist){return _c('router-link',{key:playlist.id,attrs:{\"to\":'/playlist/' + playlist.id}},[_c('p',[_vm._v(_vm._s(playlist.name))])])})],2)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <main>\r\n        <h1 class=\"page-title\">Profile\r\n            <router-link to=\"/editprofile\" v-if=\"ownProfile\">Edit </router-link>\r\n            <a href=\"\" @click.prevent.stop=\"deleteUser\" \r\n               v-if=\"ownProfile || iAdmin\">Delete </a>\r\n            <a @click=\"creatingPlaylist = true\" v-if=\"ownProfile\">Create playlist</a>\r\n        </h1>\r\n        \r\n        <div class=\"wrapper\" id=\"wrapper\">\r\n            <div v-if=\"creatingPlaylist\">\r\n                <form class=\"edit-form\">\r\n                    <p>Playlist creation</p>\r\n                    <label for=\"name\">Name:</label>\r\n                    <input type=\"name\" class=\"form-input\" v-model=\"name\">\r\n                    <br>\r\n\r\n                    <label for=\"isPublic\">Is public</label>\r\n                    <input type=\"checkbox\" class=\"form-input\" v-model=\"isPublic\">\r\n                    <br>\r\n\r\n                    <button type=\"submit\" class=\"form-button\" \r\n                            @click.stop.prevent=\"submit()\">Create</button>\r\n                    </form>\r\n            </div>\r\n            <p><span class=\"username\">{{ role + \" \" + username }}</span></p>\r\n            <h2 class=\"block-name\">Playlists:</h2>\r\n            <router-link v-for=\"playlist in playlists\" :key=\"playlist.id\"\r\n                         :to=\"'/playlist/' + playlist.id\">\r\n                <p>{{ playlist.name }}</p>\r\n            </router-link>\r\n        </div>\r\n    </main>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    data() {\r\n        return {\r\n            role: '',\r\n            username: '',\r\n            playlists: [],\r\n            id: null,\r\n            ownProfile: false,\r\n            iAdmin: false,\r\n            creatingPlaylist: false,\r\n            name: '',\r\n            isPublic: false,\r\n        };\r\n    },\r\n    created() {\r\n        this.refreshUser();\r\n    },\r\n    methods: {\r\n        refreshUser(){\r\n            let url = '/api/user/';\r\n            const params = {};\r\n            this.ownProfile = true;\r\n            if (this.$route.params.id){\r\n                url += this.$route.params.id;\r\n                this.ownProfile = false;\r\n            }\r\n            if (localStorage.getItem('token')){\r\n                params.headers = {\r\n                    Authorization: `Bearer ${localStorage.getItem('token')}`,\r\n                };\r\n            }\r\n            fetch(url, params)\r\n            .then((user) => user.json())\r\n            .then((user) => {\r\n                if (user.message){\r\n                    alert(user.message);\r\n                    this.$router.push('/');\r\n                    return;\r\n                }\r\n                this.id = user.id;\r\n                this.username = user.username;\r\n                this.role = user.is_admin ? 'Admin' : 'User';\r\n                this.playlists = user.playlists;\r\n            });\r\n            if (localStorage.getItem('token')){\r\n                fetch('/api/user', {\r\n                    headers: {\r\n                        Authorization: `Bearer ${localStorage.getItem('token')}`,\r\n                    },\r\n                })\r\n                .then((user) => user.json())\r\n                .then((user) => {\r\n                    if (user.id === this.id){\r\n                        this.ownProfile = true;\r\n                    }\r\n                    this.iAdmin = user.is_admin;\r\n                });\r\n            }\r\n        },\r\n        deleteUser(){\r\n            let url = '/api/user/';\r\n            if (this.$route.params.id){\r\n                url += this.$route.params.id;\r\n            }\r\n            fetch(url, {\r\n                method: 'DELETE',\r\n                headers: {\r\n                    Authorization: `Bearer ${localStorage.getItem('token')}`,\r\n                },\r\n            })\r\n            .then((res) => res.json())\r\n            .then((res) => {\r\n                if (res.message === 'User deleted'){\r\n                    if (this.$route.params.id === undefined){\r\n                        localStorage.removeItem('token');\r\n                        this.$emit('logout');\r\n                    }\r\n                    this.$router.push('/');\r\n                } else {\r\n                    alert(res.message);\r\n                }\r\n            });\r\n        },\r\n        submit() {\r\n            if (!this.name) { return; }\r\n            const body = {\r\n                name: this.name,\r\n                is_public: this.isPublic,\r\n            };\r\n            fetch('/api/playlists/', {\r\n                method: 'POST',\r\n                headers: {\r\n                    Authorization: `Bearer ${localStorage.getItem('token')}`,\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                body: JSON.stringify(body),\r\n            })\r\n                .then((res) => res.json())\r\n                .then((data) => {\r\n                    if (data.message) {\r\n                        alert(data.message);\r\n                        return;\r\n                    }\r\n                    this.creatingPlaylist = false;\r\n                    this.refreshUser();\r\n                });\r\n        },\r\n    },\r\n    emits: ['logout'],\r\n};\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Profile.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Profile.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Profile.vue?vue&type=template&id=8c50c2f6&\"\nimport script from \"./Profile.vue?vue&type=script&lang=js&\"\nexport * from \"./Profile.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}