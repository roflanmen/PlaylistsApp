{"version":3,"sources":["webpack:///./src/views/Playlist.vue","webpack:///src/views/Playlist.vue","webpack:///./src/views/Playlist.vue?c93e","webpack:///./src/views/Playlist.vue?2062"],"names":["render","_vm","this","_c","_self","staticClass","_v","_s","name","isMine","on","$event","editingPlaylist","_e","deletePlaylist","attrs","directives","rawName","value","editedName","expression","domProps","target","composing","isPublic","Array","isArray","_i","$$a","$$el","$$c","checked","$$v","$$i","concat","slice","stopPropagation","preventDefault","submit","tracks","id","staticRenderFns","data","created","refreshPlaylist","methods","fetch","$route","params","headers","Authorization","localStorage","getItem","then","playlist","json","message","alert","$router","back","is_public","response","status","method","push","body","JSON","stringify","$root","$emit","component"],"mappings":"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","file":"js/chunk-2d0b1658.f8b1378c.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('main',[_c('h1',{staticClass:\"page-title\"},[_vm._v(_vm._s(_vm.name))]),_c('div',{staticClass:\"wrapper\"},[_c('h1',[(_vm.isMine)?_c('a',{on:{\"click\":function($event){_vm.editingPlaylist = true}}},[_vm._v(\"Edit playlist\")]):_vm._e(),_c('br'),(_vm.isMine)?_c('a',{on:{\"click\":function($event){return _vm.deletePlaylist()}}},[_vm._v(\"Delete playlist\")]):_vm._e()]),(_vm.editingPlaylist)?_c('div',[_c('form',{staticClass:\"edit-form\"},[_c('p',[_vm._v(\"Playlist editing\")]),_c('label',{attrs:{\"for\":\"name\"}},[_vm._v(\"Name:\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.editedName),expression:\"editedName\"}],staticClass:\"form-input\",attrs:{\"type\":\"name\"},domProps:{\"value\":(_vm.editedName)},on:{\"input\":function($event){if($event.target.composing)return;_vm.editedName=$event.target.value}}}),_c('br'),_c('label',{attrs:{\"for\":\"isPublic\"}},[_vm._v(\"Is public\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.isPublic),expression:\"isPublic\"}],staticClass:\"form-input\",attrs:{\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.isPublic)?_vm._i(_vm.isPublic,null)>-1:(_vm.isPublic)},on:{\"change\":function($event){var $$a=_vm.isPublic,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.isPublic=$$a.concat([$$v]))}else{$$i>-1&&(_vm.isPublic=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.isPublic=$$c}}}}),_c('br'),_c('button',{staticClass:\"form-button\",attrs:{\"type\":\"submit\"},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.submit()}}},[_vm._v(\"Edit\")])])]):_vm._e(),_c('track-list',{attrs:{\"tracks\":_vm.tracks,\"canDelete\":_vm.isMine,\"playlist\":_vm.id}})],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <main>\r\n        <h1 class=\"page-title\">{{ name }}</h1>\r\n        <div class=\"wrapper\">\r\n            <h1>\r\n                <a @click=\"editingPlaylist = true\" v-if=\"isMine\">Edit playlist</a><br>\r\n                <a @click=\"deletePlaylist()\" v-if=\"isMine\">Delete playlist</a>\r\n            </h1>\r\n            <div v-if=\"editingPlaylist\">\r\n                <form class=\"edit-form\">\r\n                    <p>Playlist editing</p>\r\n                    <label for=\"name\">Name:</label>\r\n                    <input type=\"name\" class=\"form-input\" v-model=\"editedName\">\r\n                    <br>\r\n\r\n                    <label for=\"isPublic\">Is public</label>\r\n                    <input type=\"checkbox\" class=\"form-input\" v-model=\"isPublic\">\r\n                    <br>\r\n\r\n                    <button type=\"submit\" class=\"form-button\" \r\n                        @click.stop.prevent=\"submit()\">Edit</button>\r\n                </form>\r\n            </div>\r\n            <track-list :tracks=\"tracks\" :canDelete=\"isMine\" :playlist=\"id\"/>\r\n        </div>\r\n    </main>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    data() {\r\n        return {\r\n            name: 'Playlist',\r\n            tracks: [],\r\n            isMine: false,\r\n            editingPlaylist: false,\r\n            editedName: '',\r\n            isPublic: false,\r\n            id: null,\r\n        };\r\n    },\r\n    created() {\r\n        this.refreshPlaylist();\r\n    },\r\n    methods: {\r\n        refreshPlaylist(){\r\n            fetch(`/api/playlists/${this.$route.params.id}/`, {\r\n                headers: {\r\n                    Authorization: `Bearer ${localStorage.getItem('token')}`,\r\n                },\r\n            })\r\n            .then((playlist) => playlist.json())\r\n            .then((playlist) => {\r\n                if (playlist.message){\r\n                    alert(playlist.message);\r\n                    this.$router.back();\r\n                    return;\r\n                }\r\n                this.name = playlist.name;\r\n                this.tracks = playlist.tracks;\r\n                this.isPublic = playlist.is_public;\r\n                this.editedName = playlist.name;\r\n                this.id = playlist.id;\r\n            });\r\n            fetch(`/api/playlists/${this.$route.params.id}/check_ownership`, {\r\n                headers: {\r\n                    Authorization: `Bearer ${localStorage.getItem('token')}`,\r\n                },\r\n            }).then((response) => {\r\n                if (response.status === 200){\r\n                    this.isMine = true;\r\n                }\r\n            });\r\n        },\r\n        deletePlaylist() {\r\n            fetch(`/api/playlists/${this.$route.params.id}/`, {\r\n                method: 'DELETE',\r\n                headers: {\r\n                    Authorization: `Bearer ${localStorage.getItem('token')}`,\r\n                },\r\n            })\r\n            .then((response) => {\r\n                if (response.status === 200){\r\n                    this.$router.push('/');\r\n                }\r\n            });\r\n        },\r\n        submit() {\r\n            this.editingPlaylist = false;\r\n            fetch(`/api/playlists/${this.$route.params.id}/`, {\r\n                method: 'PUT',\r\n                headers: {\r\n                    Authorization: `Bearer ${localStorage.getItem('token')}`,\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                body: JSON.stringify({\r\n                    name: this.editedName,\r\n                    is_public: this.isPublic,\r\n                }),\r\n            })\r\n            .then((response) => {\r\n                if (response.status === 201){\r\n                    this.$root.$emit('login');\r\n                    this.refreshPlaylist();\r\n                }\r\n            });\r\n        },\r\n    },\r\n};\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Playlist.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Playlist.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Playlist.vue?vue&type=template&id=19cbeece&\"\nimport script from \"./Playlist.vue?vue&type=script&lang=js&\"\nexport * from \"./Playlist.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}