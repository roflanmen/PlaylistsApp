(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b1658"],{2059:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t._self._c;return e("main",[e("h1",{staticClass:"page-title"},[t._v(t._s(t.name))]),e("div",{staticClass:"wrapper"},[e("h1",[t.isMine?e("a",{on:{click:function(e){t.editingPlaylist=!0}}},[t._v("Edit playlist")]):t._e(),e("br"),t.isMine?e("a",{on:{click:function(e){return t.deletePlaylist()}}},[t._v("Delete playlist")]):t._e()]),t.editingPlaylist?e("div",[e("form",{staticClass:"edit-form"},[e("p",[t._v("Playlist editing")]),e("label",{attrs:{for:"name"}},[t._v("Name:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.editedName,expression:"editedName"}],staticClass:"form-input",attrs:{type:"name"},domProps:{value:t.editedName},on:{input:function(e){e.target.composing||(t.editedName=e.target.value)}}}),e("br"),e("label",{attrs:{for:"isPublic"}},[t._v("Is public")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.isPublic,expression:"isPublic"}],staticClass:"form-input",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.isPublic)?t._i(t.isPublic,null)>-1:t.isPublic},on:{change:function(e){var i=t.isPublic,s=e.target,a=!!s.checked;if(Array.isArray(i)){var l=null,r=t._i(i,l);s.checked?r<0&&(t.isPublic=i.concat([l])):r>-1&&(t.isPublic=i.slice(0,r).concat(i.slice(r+1)))}else t.isPublic=a}}}),e("br"),e("button",{staticClass:"form-button",attrs:{type:"submit"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.submit()}}},[t._v("Edit")])])]):t._e(),e("track-list",{attrs:{tracks:t.tracks,canDelete:t.isMine,playlist:t.id}})],1)])},a=[],l=(i("14d9"),{data(){return{name:"Playlist",tracks:[],isMine:!1,editingPlaylist:!1,editedName:"",isPublic:!1,id:null}},created(){this.refreshPlaylist()},methods:{refreshPlaylist(){fetch(`/api/playlists/${this.$route.params.id}/`,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(t=>t.json()).then(t=>{if(t.message)return alert(t.message),void this.$router.back();this.name=t.name,this.tracks=t.tracks,this.isPublic=t.is_public,this.editedName=t.name,this.id=t.id}),fetch(`/api/playlists/${this.$route.params.id}/check_ownership`,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(t=>{200===t.status&&(this.isMine=!0)})},deletePlaylist(){fetch(`/api/playlists/${this.$route.params.id}/`,{method:"DELETE",headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(t=>{200===t.status&&this.$router.push("/")})},submit(){this.editingPlaylist=!1,fetch(`/api/playlists/${this.$route.params.id}/`,{method:"PUT",headers:{Authorization:"Bearer "+localStorage.getItem("token"),"Content-Type":"application/json"},body:JSON.stringify({name:this.editedName,is_public:this.isPublic})}).then(t=>{201===t.status&&(this.$root.$emit("login"),this.refreshPlaylist())})}}}),r=l,n=i("2877"),o=Object(n["a"])(r,s,a,!1,null,null,null);e["default"]=o.exports}}]);
//# sourceMappingURL=chunk-2d0b1658.f8b1378c.js.map